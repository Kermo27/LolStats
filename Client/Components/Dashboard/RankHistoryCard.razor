@using LolStatsTracker.Shared.DTOs

<MudPaper Class="rounded-xl glass-card" Elevation="0" Style="max-height: 300px; overflow-y: auto;">
    <MudText Typo="Typo.h6" Class="mb-3 gradient-text">Rank History</MudText>
    @if (Milestones.Any())
    {
        <MudTimeline TimelinePosition="TimelinePosition.Start">
            @foreach (var m in Milestones.Take(5))
            {
                <MudTimelineItem Color="@(m.Type == "Promotion" ? Color.Success : Color.Error)" Size="Size.Small">
                    <ItemContent>
                        <MudText Typo="Typo.body2" Class="font-weight-bold">@m.Tier @GetDivisionRoman(m.Division)</MudText>
                        <MudText Typo="Typo.caption" Color="Color.Secondary">@m.AchievedAt.ToString("MMM dd, yyyy")</MudText>
                    </ItemContent>
                </MudTimelineItem>
            }
        </MudTimeline>
    }
    else
    {
        <MudText Typo="Typo.body2" Color="Color.Secondary">No rank milestones yet.</MudText>
    }
</MudPaper>

@code {
    [Parameter, EditorRequired] public List<RankMilestoneDto> Milestones { get; set; } = new();
    
    private static string GetDivisionRoman(int division) => division switch
    {
        1 => "I",
        2 => "II",
        3 => "III",
        4 => "IV",
        _ => ""
    };
}
