@using LolStatsTracker.Shared.DTOs
@using LolStatsTracker.Services.LeagueAssetsService

<MudPaper Class="rounded-xl glass-card" Elevation="0">
    <MudText Typo="Typo.h6" Class="mb-4 gradient-text">Top 5 Most Played</MudText>
    <MudTable Items="Champions.Take(5)" Hover="true" Dense="true" Elevation="0">
        <HeaderContent>
            <MudTh>Champion</MudTh>
            <MudTh>Games</MudTh>
            <MudTh>Winrate</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd>
                <div class="d-flex align-center gap-2">
                    <img src="@LeagueAssets.GetChampionIconUrl(context.ChampionName)" 
                         height="32" width="32" 
                         style="border-radius: 50%; object-fit: cover;" />
                    <MudText>@context.ChampionName</MudText>
                </div>
            </MudTd>
            <MudTd>@context.Games</MudTd>
            <MudTd>
                <MudText Color="@(context.Winrate * 100 >= 50 ? Color.Success : Color.Error)" Class="font-weight-bold">
                    @((context.Winrate * 100).ToString("F0"))%
                </MudText>
            </MudTd>
        </RowTemplate>
    </MudTable>
</MudPaper>

@code {
    [Parameter, EditorRequired] public List<ChampionStatsDto> Champions { get; set; } = new();
    [Inject] private ILeagueAssetsService LeagueAssets { get; set; } = null!;
}
