<div class="activity-container">
    <div class="activity-days-labels">
        @foreach (var day in DayLabels)
        {
            <span class="day-label">@day</span>
        }
    </div>
    <div class="activity-grid">
        @foreach (var week in ActivityMatrix)
        {
            <div class="activity-week">
                @foreach (var day in week)
                {
                    var isFuture = day.Date.Date > DateTime.Today;
                    <div class="activity-cell"
                         style="@($"background-color: {GetColor(day.Count, isFuture)}")"
                         title="@(isFuture ? string.Empty : $"{day.Date:dd MMMM yyyy}: {day.Count} matches.")"
                         @onclick="() => { if (!isFuture) OnDayClick.InvokeAsync(day.Date); }">
                    </div>
                }
            </div>
        }
    </div>
</div>

@code {
    [Parameter, EditorRequired] public List<List<(DateTime Date, int Count)>> ActivityMatrix { get; set; } = [];
    [Parameter, EditorRequired] public Func<int, bool, string> GetColor { get; set; } = default!;
    [Parameter] public EventCallback<DateTime> OnDayClick { get; set; }

    private static readonly string[] DayLabels = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
}