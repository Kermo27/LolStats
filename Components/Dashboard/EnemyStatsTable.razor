<MudPaper Class="p-4 rounded-2xl bg-surface">
    <MudText Typo="Typo.h5" Class="mb-4 font-bold">Stats vs Enemy Bot</MudText>

    <MudTextField @bind-Value="_searchString"
                  Placeholder="Filter by enemy..."
                  Adornment="Adornment.Start"
                  AdornmentIcon="@Icons.Material.Filled.Search"
                  Class="mb-4 w-full" />

    <MudTable Items="filteredEnemies"
              Hover="true"
              Dense="true"
              Bordered="true"
              Striped="true"
              Filter="FilterFunc"
              RowsPerPage="10"
              Breakpoint="Breakpoint.Sm"
              Class="rounded-xl overflow-hidden">
        <HeaderContent>
            <MudTh><MudTableSortLabel T="EnemyStats" SortBy="@(e => e.Enemy)">Enemy</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel T="EnemyStats" SortBy="@(e => e.Games)">Games</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel T="EnemyStats" SortBy="@(e => e.Wins)">Wins</MudTableSortLabel></MudTh>
            <MudTh><MudTableSortLabel T="EnemyStats" SortBy="@(e => e.WinRate)">WR %</MudTableSortLabel></MudTh>
        </HeaderContent>

        <RowTemplate>
            <MudTd DataLabel="Enemy">@context.Enemy</MudTd>
            <MudTd DataLabel="Games">@context.Games</MudTd>
            <MudTd DataLabel="Wins">@context.Wins</MudTd>
            <MudTd DataLabel="WR %">
                <MudText Class="@UiHelpers.GetWrColor(@context.WinRate)">
                    @context.WinRate.ToString("F1")%
                </MudText>
            </MudTd>
        </RowTemplate>

        <PagerContent>
            <MudTablePager />
        </PagerContent>
    </MudTable>
</MudPaper>

@code {
    [Parameter] public IEnumerable<EnemyStats> Enemies { get; set; } = Enumerable.Empty<EnemyStats>();

    private string _searchString = string.Empty;

    private IEnumerable<EnemyStats> filteredEnemies => string.IsNullOrWhiteSpace(_searchString)
        ? Enemies
        : Enemies.Where(e => e.Enemy.Contains(_searchString, StringComparison.OrdinalIgnoreCase));

    private bool FilterFunc(EnemyStats e) =>
        string.IsNullOrWhiteSpace(_searchString) ||
        e.Enemy.Contains(_searchString, StringComparison.OrdinalIgnoreCase);
}
